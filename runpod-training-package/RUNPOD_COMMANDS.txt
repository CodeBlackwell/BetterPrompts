# RUNPOD QUICK COMMANDS
# Copy and paste these commands directly into your RunPod terminal

# 1. First, create the all-in-one script:
cat > run_everything.sh << 'EOF'
#!/bin/bash
# Auto-training script for RunPod

echo "🚀 BetterPrompts Training Automation"
echo "===================================="

# Install dependencies
echo "📦 Installing dependencies..."
pip install --upgrade pip
pip install torch==2.0.1+cu118 -f https://download.pytorch.org/whl/torch_stable.html
pip install -r requirements.txt

# Check GPU
echo "🎮 GPU Status:"
nvidia-smi --query-gpu=name,memory.total --format=csv,noheader

# Verify PyTorch
python -c "import torch; print(f'PyTorch: {torch.__version__}')"
python -c "import torch; print(f'CUDA: {torch.cuda.is_available()}')"

# Check data
if [ ! -f "data/openai_training_data.json" ]; then
    echo "❌ Training data not found!"
    exit 1
fi
echo "✅ Training data found"

# Create directories
mkdir -p models results logs

# Start training
echo "🏃 Starting training..."
tmux new-session -d -s training "python train_model.py 2>&1 | tee logs/training.log"
tmux new-session -d -s gpu_monitor "watch -n 1 nvidia-smi"

echo "✅ Training started!"
echo ""
echo "Monitor with:"
echo "  ./monitor.sh"
echo "  tmux attach -t training"
echo "  tail -f logs/training.log"
echo ""
echo "Training will take ~25 minutes"
EOF

# 2. Make it executable:
chmod +x run_everything.sh

# 3. Run it:
./run_everything.sh

# ALTERNATIVE: Direct one-liner (if you're feeling brave):
pip install -r requirements.txt && python train_model.py